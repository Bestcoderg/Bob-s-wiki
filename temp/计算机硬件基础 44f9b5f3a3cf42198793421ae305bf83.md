# 计算机硬件基础

## 频率与性能

**CPU性能：逻辑CPU核数 * 主频率 * IPC(每个时钟周期可执行的指令数)**

以上我们看到的是CPU性能的计算公式，目前CPU架构的更新换代直接影响和提高的是IPC值，当然制造工艺和架构对主频的影响也是关联的。另外，并行计算也是直接提高IPC的途径，这也是现在为什么主流CPU从单核转向双核，将来转向四核，和更多核。

主频：CPU频率

外频：CPU的外频，通常为系统总线的工作频率（系统时钟频率），CPU与周边设备传输数据的频率，具体是指CPU到芯片组之间的总线速度。外频是CPU与主板之间同步运行的速度，在早期的绝大部分电脑系统中外频，也是内存与主板之间的同步运行的速度，在这种方式下，可以理解为CPU的外频直接与内存相连通，实现两者间的同步运行状态。

CPU主频、外频和前端总线（FSB）频率的单位都是Hz，目前通常是以MHz和GHz作为计量单位。需要注意的是不要将外频和FSB频率混为一谈，我们时常在IT媒体上可以看见一些外频800MHz、533MHz的词语，其实这些是把外频和FSB给混淆了。例如Pentium 4处理器的外频目前有100MHz和133MHz两种，由于Intel使用了四倍传输技术，受益于Pentium4处理器的四倍数据传输（QDR，Quad data Rate）总线。该技术可以使系统总线在一个时钟周期内传送4次数据，也就是传输效率是原来的4倍，相当于用了4条原来的前端总线来和内存发生联系。在外频仍然是133MHZ（如P4 Northwood处理器）的时候，前端总线的速度增加4倍变成了133×4=533MHZ，当外频升到200MHZ，前端总线变成800MHZ，所以你会看到533前端总线的P4和800前端总线的P4，就是这样来的。他们的实际外频只有133和200。即FSB=CPU外频×4。AMD Athlon 64处理器基于同样的道理，也将会以200MHz外频支持800MHz的前端总线频率。但是对于AMD Athlon XP处理器，因其前端总线使用双倍数据传输技术（DDR，Double Data Rate），它的前端总线频率为外频的两倍，所以外频200MHz的Athlon XP处理器的前端总线频率为400MHz。对于早期的处理器，如Pentium III，其外频和前端总线频率是相等的。

前端总线FSB的速度指的是CPU和北桥芯片间总线的速度，更实质性的表示了CPU和外界数据传输的速度。而外频的概念是建立在数字脉冲信号震荡速度基础之上的，也就是说，100MHz外频特指数字脉冲信号在每秒钟震荡一万万次，它更多的影响了PCI及其他总线的频率。之所以前端总线与外频这两个概念容易混淆，主要的原因是在以前的很长一段时间里（主要是在Pentium 4出现之前和刚出现Pentium 4时），前端总线频率与外频是相同的，因此往往直接称前端总线为外频，最终造成这样的误会。随着计算机技术的发展，人们发现前端总线频率需要高于外频，因此采用了QDR（Quad Date Rate）技术，或者其他类似的技术实现这个目的。这些技术的原理类似于AGP的2X或者4X，它们使得前端总线的频率成为外频的2倍、4倍甚至更高，从此之后前端总线和外频的区别才开始被人们重视起来。

FSB是将CPU连接到北桥芯片的总线，也是CPU和外界交换数据的主要通道，因此前端总线的数据传输能力对整机性能影响很大，数据传输最大带宽取决于所有同时传输数据的宽度和传输频率，即数据带宽=总线频率×数据位宽÷8。例如Intel公司的PⅡ333使用6 6MHz的前端总线，所以它与内存之间的数据交换带宽为528MB/s =（66×64）/8，而其PⅡ350则使用100MHz的前端总线，所以其数据交换峰值带宽为800MB/s=（100×64）/8。再比如Intel 845芯片组只支持单通道DDR333内存，所以理论最高内存带宽为333MHz×8Bytes（数据宽度）=2.7GB/s，而Intel 875平台在双通道下的内存带宽最高可达400MHz×8Bytes（数据宽度）×2=6.4GB/s。目前PC机常用的前端总线频率有266MHz、333MHz、400MHz、533MHz、800MHz、1066MHz几种。当外频为200MHz时，前端总线达到800MHz后，带宽也随之提高到6.4GB/s，采用双通道DDR400可以解决匹配问题，双通道DDR400的内存带宽将达到6.4GB/s，刚好可以满足需要。对于Athlon XP来说，因其前端总线为400MHz时，带宽为3.2GB/s，单通道DDR400内存带宽为3.2GB/s，也可以满足系统需求。因此，在未来的时间里，DDR400将会大行其道。这也是为什么英特尔转而支持DDR400的原因所在。

从上文我们可以看到，北桥芯片的存在限制了CPU以及其他硬件的频率，越来越不能适应计算机性能的，所以在之后的计算机中，北桥芯片被取消了或是说被整合到了CPU中。

## 内存相关技术

![%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2044f9b5f3a3cf42198793421ae305bf83/Untitled.png](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2044f9b5f3a3cf42198793421ae305bf83/Untitled.png)

对于一条内存，其实从外观上就可以看出来小张的内存条由很多海力士的内存颗粒组成。从内存控制器到内存颗粒内部逻辑，笼统上讲从大到小为：`channel＞DIMM＞rank＞chip＞bank＞row/column`，如下图：

![%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2044f9b5f3a3cf42198793421ae305bf83/Untitled%201.png](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2044f9b5f3a3cf42198793421ae305bf83/Untitled%201.png)

一个现实的例子是：

![%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2044f9b5f3a3cf42198793421ae305bf83/Untitled%202.png](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80%2044f9b5f3a3cf42198793421ae305bf83/Untitled%202.png)

在这个例子中，一个i7 CPU支持两个Channel（双通道），每个Channel上可以插俩个DIMM,而每个DIMM由两个rank构成，8个chip组成一个rank。由于现在多数内存颗粒的位宽是8bit,而CPU带宽是64bit，所以经常是8个颗粒可以组成一个rank。所以小张的内存条2R X 8的意思是由2个rank组成，每个rank八个内存颗粒(为啥我们以后讲)。由于整个内存是4GB，我们可以算出单个内存颗粒是256MB。

### 双通道内存技术

[](https://www.bilibili.com/video/av77644266)

DDR3 SDRAM（Double-Data-Rate Three Synchronous Dynamic Random Access Memory），是一种电脑存储器规格。它属于SDRAM家族的存储器产品，提供相较于DDR2 SDRAM更高的运行性能与更低的电压，是DDR2 SDRAM（四倍数据率同步动态随机存取存储器）的后继者（增加至八倍）。

## 接口技术

### 为什么主流显示器不适用USB接口

USB是全称是Universal Serial Bus，通用串行总线，DVI和HDMI是Digital Visual Interface、High Definition Multimedia Interface，总线和接口用途不同，接口只传输特定信号，如果非要说带宽，USB两根线的串行传输（2.0以前），跟4个TMDS通道（一组时钟，DVI单通道，HDMI A型口）比带宽不合适，而且就算在低分辨率下比如640x480@ 60Hz需要的带宽USB能满足，**但延迟会导致严重的画面与操控、声音的不同步，对于视频传输而言数据错误transmitter也不会再给reciver发一遍，而是告诉终端这个数据是错的，你需要做模糊处理，比如从相邻数据采样，TMDS差分信号对信号电平的衰减不敏感，这是HDMI可以使用15m长线的原因。**有人会问，有USB接口的外置显卡啊，还有widi无线传输，这些东西都是实时压缩画面并通过USB或者wifi传输到解码端再转换为HDMI标准信号，所以还是有很大区别的。

**分析带宽只是个初级认知，USB接口设计之初就是传输数据的，显示接口是传输信号的，若能理解这两者差别，也不用多讲了。**

### 发展（**USB Type-C接口**）

USB接口早已被大家所熟知，以往USB接口被设计用来传输数据，所以它在移动硬盘等存储设备的使用上非常常见。现在USB 3.1 Gen2的速度已经达到10Gbps，设计标准也可以满足视频、数据兼顾传输，所以在一些显示器上，也能够发现USB 3.1接口。现在的USB3.1接口，已经能够满足4K 30P的分辨率显示，大致与HDMI1.4在同一水平。但它以后再进行升级，必将能成为最通用的显示传输方式。需要注意的是，USB 3.1 Gen1就是USB 3.0，而USB 3.1 Gen2才是真正的USB3.1

USB3.1是传输协议，而USB接口形状有好多种，拿USB 3.1的接口来说，有Type-A、Type-B以及Type-C。Type-C的形状最小，也被宣传的最多。我们所说的Type-C接口，仅仅是接口形状，它并不对等于USB3.1。Type-C接口，也被用在了雷电3上。

Type C接口的好处在于可以正反插拔，部分Type C接口也同样具有数据、电力、信号传输的功能，被应用到显示器上时可以带来很多方便。**Type C笔记本用户可以透过一个接口完成充电和连接显示器，还能使用显示器上拓展出来的USB接口，极大地减少了笔记本的负担。**带Type-C接口的BenQ PD2710QC就凭借这个优势斩获了不少MacBook用户的心。

### 雷电接口

雷电（thunderbolt）接口在苹果电脑上用的非常多，苹果的中文官网将其译为雷雳。它以速度快，传输稳定而著称。雷电接口的技术融合了PCI Express和DisplayPort（就是上面说的DP口）两种通信协议。其中PCI Express用于数据传输，可以非常方便地进行任何类型设备扩展；DisplayPort用于显示，能同步传输1080p乃至4K视频和最多八声道音频。并且两条通道在传输时都有自己单独的通道，不会产生任何干扰。

雷电接口到现在已经发展到三代。雷电1的速度达到10Gbps，雷电2的速度达到20Gbps，现在的雷电3达到40Gbps，依然处于民用传输速度的顶端。容易让人混淆的是，雷电接口的形状在雷电1和雷电2外形上采用的是Mini DP的外形，而雷电3采用的是USB Type-C的外形，但即使外形不同，它们采用的数据传输方式都是雷电协议。**不像其它接口能直观地从形状就能分辨出来，使用雷电接口需要认准接口旁的闪电标志，以作区分。**

雷电口也支持菊花链连接。而且，我们也可以在显示器下级连上雷电口的硬盘，作为扩展使用。这也是雷电口菊花链的优势所在。总结来看，雷电接口是集信号、数据、电力传输为一身的集成性接口，可以极大地提高使用效率。目前这个接口多应用于苹果相关设备上。**明基今年将新推出一款带有两个雷电3接口的显示器PD3220U**，**其中一个雷电3接口的电力传输可以高达85W**，这就能帮助解决传统显示器接口给笔记本充电供电不足的状况。

这些常用的接口在各类显示器上都可以看见，对于我们日常使用的显示器，如今HDMI占有绝对的主导位置。它成熟稳定，也能够满足日常的需要，但是**应用于显示器硬件校色时，并不推荐使用HDMI接口**，它的RGB范围会有缺失，校色时选择DP接口是更好的选择。其余接口的实用性也很高，一些相对“高冷”的接口目前也在不断普及。因此，根据需要进行选择，才是最根本的解决方式。